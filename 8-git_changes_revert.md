### Изменение последнего коммита

***Для того, чтобы сделать последний коммит еще раз*** используется комманда:
```
git commit --amend
git commit -am "final commit" --amend
```
Будет перезаписан последний коммит. Удобно, если забыли добавить какие-то файлы или изменения к коммиту.

### Отмена индексации файла и отмена коммита

***Чтобы отменить индексацию файла, используется следующая команда:***
```
git reset HEAD <файл>
```
Например, вы внесли изменения в два файла и хотите записать их как два отдельных коммита, но случайно набрали `git add *` и проиндексировали оба файла.
```
git add .
git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   README.txt
#       modified:   benchmarks.rb
#
```
Выполняем комманду `git reset HEAD README.txt`, чтобы отменить индексацию README.txt.

Команда reset имеет 3 параметра: `soft`, `mixed`, `hard`.

1. ***Soft***
```
git reset --soft dsaf3f
```
будет просто переключен поинтер на нужный коммит

2. ***Mixed***
```
git reset --mixed dsaf3f
```
будет переключен поинтер на нужный коммит и обновлен индекс

3. ***Hard***
```
git reset --hard dsaf3f
```
будет просто переключен поинтер на нужный коммит, обновлен индекс и рабочая копия, т.е. все файлы


### Переключиться на коммит

***Чтобы быстро отменить изменения***, вернуть то состояние, в котором он находился во время последнего коммита (или первоначального клонирования, или какого-то другого действия, после которого файл попал в рабочий каталог):
```
git checkout -- benchmarks.rb
git checkout benchmarks.rb
```
Поверх файла benchmarks.rb будет скопирован файл из предыдущего коммита.

***Чтобы вернуть все файлы***, к прежнему состоянию:
```
git checkout -- .
git checkout -- *
```
### Отмена коммита
Если коммит содержит неверные изменения и уже был запушен, то мы уже не сможем сделать ему `reset`. Зато можно сделать:
```
git revert ff749ff
```
Эта команда производет изменения обратные тем, что в коммите. Т.е. если добавлялся текст - удалит, удалялся - добавит, и так же с файлами.

Можно откатить сразу несколько коммитов:
```
git revert ff749ff..33d93dk  (от нового к старому)
```
на каждый коммит, который мы хотим отменить будет создан свой коммит. Чтобы создавался только один коммит нужно использовать флаг:
```
git revert ff749ff..33d93dk --no-commit
```
### Отмена коммитов, которые уже были запушены
Смотрим историю `git reflog` и потом вполняем команды:
```
git reset --hard HEAD@{3}  к тому коммиту, начиная с которого надо отменить
git reset --soft HEAD@{1}  возвращаемся где были
git commit -am "changed"
```
